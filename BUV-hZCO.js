import{_ as Ye}from"./BK9TLtsd.js";import{b as ee,_ as se,a as ae}from"./BvV4tLCH.js";import{_ as le}from"./HmYcjI_V.js";import{_ as U}from"./C-AZkT3w.js";import{a4 as i,ag as N,aa as $,g as w,l as B,aq as C,a7 as e,aB as es,a5 as p,a6 as a,ab as l,ad as f,ae as _,ar as A,x as V,A as S,r as P,w as $e,j as ss,ah as H,H as M,ac as q,k as _e,am as L,an as D,E as xe,aC as as,ax as ls,aD as ts,aE as ns,aF as os,n as ke}from"./assets/index-FK6NKOEU.js";import{u as ie}from"./C4oN29Sb.js";import{O as ne,D as rs,U as Be}from"./Be5pzGHL.js";import{O as E,I as ve}from"./_n7zrSvp.js";import{_ as Fe,a as Ve,b as Ne,c as Se,d as Ae,e as qe,f as Pe,g as Ze,h as Le}from"./BNzJyZUw.js";import{c as y,x as te,e as ds,f as us,_ as R,y as is,h as cs,I as O,i as fs,w as ps,k as ms,V as _s,M as vs,l as gs,N as bs,m as ce,U as ys,F as hs,W as ws,H as Cs,n as $s,L as xs,o as ks,p as Bs,z as Fs,K as Vs,$ as Ns,q as Ss,P as As,r as qs,D as Ps,Q as Zs}from"./CyG_wUY-.js";import{_ as Ls,a as Ds,b as Is,c as Os}from"./BHGwB7GL.js";import{L as De}from"./DtLEkEW6.js";import{_ as Hs,a as Ms,b as Z,c as oe,d as Es,e as g,r as js,f as Ie,g as Us,h as Rs,i as Ts,j as zs,k as Gs,l as Qs,m as Ws,n as Ks}from"./DEPmpnye.js";import{u as Js,_ as Xs,a as Oe,F as He,b as T,c as G,d as Ys,Z as ea,e as sa,f as K,g as J,h as aa,i as la,j as ta,t as fe,o as Me,s as re,k as Ee}from"./pROuP_Rl.js";import{_ as na}from"./BEuhXvc7.js";import{c as oa}from"./CnPnw603.js";import{P as ra}from"./i_uLiTgv.js";import{_ as pe}from"./C672HGWJ.js";import"./CW_VSWmn.js";import"./D86VDNy1.js";function da(r,s){return i(),N("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[$("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4.5 1C4.77614 1 5 1.22386 5 1.5V2H10V1.5C10 1.22386 10.2239 1 10.5 1C10.7761 1 11 1.22386 11 1.5V2H12.5C13.3284 2 14 2.67157 14 3.5V12.5C14 13.3284 13.3284 14 12.5 14H2.5C1.67157 14 1 13.3284 1 12.5V3.5C1 2.67157 1.67157 2 2.5 2H4V1.5C4 1.22386 4.22386 1 4.5 1ZM10 3V3.5C10 3.77614 10.2239 4 10.5 4C10.7761 4 11 3.77614 11 3.5V3H12.5C12.7761 3 13 3.22386 13 3.5V5H2V3.5C2 3.22386 2.22386 3 2.5 3H4V3.5C4 3.77614 4.22386 4 4.5 4C4.77614 4 5 3.77614 5 3.5V3H10ZM2 6V12.5C2 12.7761 2.22386 13 2.5 13H12.5C12.7761 13 13 12.7761 13 12.5V6H2ZM7 7.5C7 7.22386 7.22386 7 7.5 7C7.77614 7 8 7.22386 8 7.5C8 7.77614 7.77614 8 7.5 8C7.22386 8 7 7.77614 7 7.5ZM9.5 7C9.22386 7 9 7.22386 9 7.5C9 7.77614 9.22386 8 9.5 8C9.77614 8 10 7.77614 10 7.5C10 7.22386 9.77614 7 9.5 7ZM11 7.5C11 7.22386 11.2239 7 11.5 7C11.7761 7 12 7.22386 12 7.5C12 7.77614 11.7761 8 11.5 8C11.2239 8 11 7.77614 11 7.5ZM11.5 9C11.2239 9 11 9.22386 11 9.5C11 9.77614 11.2239 10 11.5 10C11.7761 10 12 9.77614 12 9.5C12 9.22386 11.7761 9 11.5 9ZM9 9.5C9 9.22386 9.22386 9 9.5 9C9.77614 9 10 9.22386 10 9.5C10 9.77614 9.77614 10 9.5 10C9.22386 10 9 9.77614 9 9.5ZM7.5 9C7.22386 9 7 9.22386 7 9.5C7 9.77614 7.22386 10 7.5 10C7.77614 10 8 9.77614 8 9.5C8 9.22386 7.77614 9 7.5 9ZM5 9.5C5 9.22386 5.22386 9 5.5 9C5.77614 9 6 9.22386 6 9.5C6 9.77614 5.77614 10 5.5 10C5.22386 10 5 9.77614 5 9.5ZM3.5 9C3.22386 9 3 9.22386 3 9.5C3 9.77614 3.22386 10 3.5 10C3.77614 10 4 9.77614 4 9.5C4 9.22386 3.77614 9 3.5 9ZM3 11.5C3 11.2239 3.22386 11 3.5 11C3.77614 11 4 11.2239 4 11.5C4 11.7761 3.77614 12 3.5 12C3.22386 12 3 11.7761 3 11.5ZM5.5 11C5.22386 11 5 11.2239 5 11.5C5 11.7761 5.22386 12 5.5 12C5.77614 12 6 11.7761 6 11.5C6 11.2239 5.77614 11 5.5 11ZM7 11.5C7 11.2239 7.22386 11 7.5 11C7.77614 11 8 11.2239 8 11.5C8 11.7761 7.77614 12 7.5 12C7.22386 12 7 11.7761 7 11.5ZM9.5 11C9.22386 11 9 11.2239 9 11.5C9 11.7761 9.22386 12 9.5 12C9.77614 12 10 11.7761 10 11.5C10 11.2239 9.77614 11 9.5 11Z",fill:"currentColor"})])}function ua(r,s){return i(),N("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[$("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.84182 3.13514C9.04327 3.32401 9.05348 3.64042 8.86462 3.84188L5.43521 7.49991L8.86462 11.1579C9.05348 11.3594 9.04327 11.6758 8.84182 11.8647C8.64036 12.0535 8.32394 12.0433 8.13508 11.8419L4.38508 7.84188C4.20477 7.64955 4.20477 7.35027 4.38508 7.15794L8.13508 3.15794C8.32394 2.95648 8.64036 2.94628 8.84182 3.13514Z",fill:"currentColor"})])}function ia(r,s){return i(),N("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[$("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M6.1584 3.13508C6.35985 2.94621 6.67627 2.95642 6.86514 3.15788L10.6151 7.15788C10.7954 7.3502 10.7954 7.64949 10.6151 7.84182L6.86514 11.8418C6.67627 12.0433 6.35985 12.0535 6.1584 11.8646C5.95694 11.6757 5.94673 11.3593 6.1356 11.1579L9.565 7.49985L6.1356 3.84182C5.94673 3.64036 5.95694 3.32394 6.1584 3.13508Z",fill:"currentColor"})])}function ca(r,s){return i(),N("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[$("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5.5 1C5.22386 1 5 1.22386 5 1.5C5 1.77614 5.22386 2 5.5 2H9.5C9.77614 2 10 1.77614 10 1.5C10 1.22386 9.77614 1 9.5 1H5.5ZM3 3.5C3 3.22386 3.22386 3 3.5 3H5H10H11.5C11.7761 3 12 3.22386 12 3.5C12 3.77614 11.7761 4 11.5 4H11V12C11 12.5523 10.5523 13 10 13H5C4.44772 13 4 12.5523 4 12V4L3.5 4C3.22386 4 3 3.77614 3 3.5ZM5 4H10V12H5V4Z",fill:"currentColor"})])}const fa=w({__name:"TableCaption",props:{class:{}},setup(r){const s=r;return(u,n)=>(i(),N("caption",{class:C(e(y)("mt-4 text-sm text-muted-foreground",s.class))},[B(u.$slots,"default")],2))}}),pa={class:"grid gap-2 space-y-2"},ma={class:"flex items-center space-x-2 sm:space-x-4"},_a={class:"flex items-center space-x-2 sm:space-x-4"},va={class:"flex items-center space-x-2 sm:space-x-4"},ga={class:"flex items-center space-x-2 sm:space-x-4"},ba={class:"flex items-center space-x-2 sm:space-x-4"},ya={class:"flex items-center space-x-2 sm:space-x-4"},ha={class:"flex items-center space-x-2 sm:space-x-4"},wa=w({__name:"UserProfile",setup(r){const s=es(ie()),u=n=>{n.length>0&&(navigator.clipboard.writeText(n),E.success("复制成功"))};return(n,o)=>{const t=Fe,d=Ye;return i(),p(e(ee),null,{default:a(()=>[l(e(se),{class:"dark:bg-gray-900 bg-gray-100 rounded-t-lg"},{default:a(()=>[l(e(le),null,{default:a(()=>o[3]||(o[3]=[f("用户信息")])),_:1})]),_:1}),l(e(ae),{class:"text-sm p-3"},{default:a(()=>[$("ul",pa,[$("li",ma,[l(e(U),{for:"账户编号",class:"text-sm md:text-lg font-black"},{default:a(()=>o[4]||(o[4]=[f("账户编号:")])),_:1}),l(t,{class:"w-1/2 lg:w-auto"},{default:a(()=>[f(_(e(s).user_no),1)]),_:1}),e(s).user_no.value.length>0?(i(),p(d,{key:0,class:"size-6 hover:text-gray-500 cursor-pointer",onClick:o[0]||(o[0]=c=>u(e(s).user_no.value))})):A("",!0)]),$("li",_a,[l(e(U),{for:"账户名称",class:"text-sm md:text-lg font-black"},{default:a(()=>o[5]||(o[5]=[f("账户名称:")])),_:1}),l(t,{class:"w-1/2 lg:w-auto"},{default:a(()=>[f(_(e(s).username),1)]),_:1}),e(s).username.value.length>0?(i(),p(d,{key:0,class:"size-6 hover:text-gray-500 cursor-pointer",onClick:o[1]||(o[1]=c=>u(e(s).username.value))})):A("",!0)]),$("li",va,[l(e(U),{for:"账户邮箱",class:"text-sm md:text-lg font-black"},{default:a(()=>o[6]||(o[6]=[f("账户邮箱:")])),_:1}),l(t,{class:"w-1/2 lg:w-auto"},{default:a(()=>[f(_(e(s).email),1)]),_:1}),e(s).email.value.length>0?(i(),p(d,{key:0,class:"size-6 hover:text-gray-500 cursor-pointer",onClick:o[2]||(o[2]=c=>u(e(s).email.value))})):A("",!0)]),$("li",ga,[l(e(U),{for:"账户等级",class:"text-sm md:text-lg font-black"},{default:a(()=>o[7]||(o[7]=[f("账户等级:")])),_:1}),$("span",null,_(e(s).beta_level),1)]),$("li",ba,[l(e(U),{for:"注册时间",class:"text-sm md:text-lg font-black"},{default:a(()=>o[8]||(o[8]=[f("注册时间:")])),_:1}),$("span",null,_(e(s).created_at),1)]),$("li",ya,[l(e(U),{for:"上次登录时间",class:"text-sm md:text-lg font-black"},{default:a(()=>o[9]||(o[9]=[f("上次登录时间:")])),_:1}),$("span",null,_(e(s).last_login_at),1)]),$("li",ha,[l(e(U),{for:"上次登录地址",class:"text-sm md:text-lg font-black"},{default:a(()=>o[10]||(o[10]=[f("上次登录地址:")])),_:1}),$("span",null,_(e(s).last_login_ip),1)])])]),_:1})]),_:1})}}}),je=w({__name:"Switch",props:{defaultChecked:{type:Boolean},checked:{type:Boolean},disabled:{type:Boolean},required:{type:Boolean},name:{},id:{},value:{},asChild:{type:Boolean},as:{},class:{}},emits:["update:checked"],setup(r,{emit:s}){const u=r,n=s,o=V(()=>{const{class:d,...c}=u;return c}),t=te(o,n);return(d,c)=>(i(),p(e(us),S(e(t),{class:e(y)("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",u.class)}),{default:a(()=>[l(e(ds),{class:C(e(y)("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0"))},null,8,["class"])]),_:1},16,["class"]))}});/**
 * @license lucide-vue-next v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=oa("TrashIcon",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]),$a={class:"grid gap-3"},xa={class:"flex items-center justify-between"},ka={class:"text-muted-foreground"},Ba={key:0},Fa={key:0},Va={key:1},Na=w({__name:"OAuth",emits:["update:isBindDiscourse"],setup(r,{emit:s}){const u=s,n=P([]);$e(n,b=>{b.forEach(v=>{v.platform.toLocaleLowerCase()==="discourse"&&u("update:isBindDiscourse",v.is_bind)})}),ss(()=>{ne.getAccountOAuth().then(b=>{n.value=b}).catch(b=>{E.error(b.error)})});const o=P(!1),t=P(!1),d=P(!1),c=P(null),m=(b=!0)=>{if(c.value==null){o.value=!1;return}if(b){c.value.is_bind=!c.value.is_bind;return}if(t.value=!0,c.value.is_bind===!1){ne.unbindAccountOAuth(c.value.connect).then(()=>{var v;t.value=!1,o.value=!1,((v=c.value)==null?void 0:v.platform.toLowerCase())==="discourse"&&u("update:isBindDiscourse",!1),E.success("解绑成功")}).catch(v=>{t.value=!1,o.value=!1,c.value&&(c.value.is_bind=!c.value.is_bind),E.error(v.error)});return}ne.getBindAccountOAuthURL(c.value.platform.toLowerCase()).then(v=>{setTimeout(()=>{d.value=!0},5e3);const k=setInterval(()=>{ne.getAccountOAuth().then(F=>{F.forEach(x=>{c.value&&x.connect===c.value.connect&&x.is_bind==c.value.is_bind&&(c.value=x,d.value=!1,t.value=!1,o.value=!1,x.platform.toLowerCase()==="discourse"&&u("update:isBindDiscourse",!0),clearInterval(k))})}).catch(()=>{})},5e3);window.open(v.redirect,"_blank")}).catch(v=>{d.value=!1,t.value=!1,o.value=!1,c.value&&(c.value.is_bind=!c.value.is_bind),E.error(v.error)})},h=b=>{c.value=b,o.value=!0};return(b,v)=>(i(),p(e(ee),null,{default:a(()=>[l(e(se),{class:C(e(y)("dark:bg-gray-900 bg-gray-100 rounded-t-lg"))},{default:a(()=>[l(e(le),null,{default:a(()=>v[3]||(v[3]=[f(" 第三方授权 ")])),_:1})]),_:1},8,["class"]),l(e(ae),{class:C(e(y)("grid gap-2 p-3 text-sm"))},{default:a(()=>[$("ul",$a,[(i(!0),N(M,null,H(n.value,(k,F)=>(i(),p(e(Ls),{key:F},{default:a(()=>[l(e(Ds),null,{default:a(()=>[l(e(Is),null,{default:a(()=>[$("li",xa,[$("span",ka,_(k.platform),1),l(e(Ve),{open:o.value,"onUpdate:open":v[2]||(v[2]=x=>o.value=x)},{default:a(()=>[l(e(Ne),{"as-child":""},{default:a(()=>[l(e(je),{checked:k.is_bind,"onUpdate:checked":[x=>k.is_bind=x,()=>h(k)]},null,8,["checked","onUpdate:checked"])]),_:2},1024),l(e(Se),null,{default:a(()=>[l(e(Ae),null,{default:a(()=>[l(e(qe),null,{default:a(()=>{var x,I;return[f(" 确定要"+_((x=c.value)!=null&&x.is_bind?"绑定":"解绑")+" "+_((I=c.value)==null?void 0:I.platform)+"？ ",1)]}),_:1}),l(e(Pe),null,{default:a(()=>{var x;return[d.value?(i(),N("div",Ba,[f(" 正在"+_((x=c.value)!=null&&x.is_bind?"绑定":"解绑")+"，请稍后... ",1),v[4]||(v[4]=$("p",null,"如果操作失败或者等待时间过长，请刷新页面重试。",-1))])):A("",!0)]}),_:1})]),_:1}),l(e(Ze),null,{default:a(()=>[l(e(Le),{onClick:v[0]||(v[0]=x=>m()),disabled:t.value},{default:a(()=>v[5]||(v[5]=[f("取消")])),_:1},8,["disabled"]),l(e(R),{type:"primary",onClick:v[1]||(v[1]=x=>m(!1)),disabled:t.value},{default:a(()=>[t.value?(i(),p(e(De),{key:0,class:C(e(y)("w-4 h-4 mr-2 animate-spin"))},null,8,["class"])):A("",!0),v[6]||(v[6]=f(" 确认 "))]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:2},1032,["open"])])]),_:2},1024),l(e(Os),null,{default:a(()=>[k.is_bind?(i(),N("div",Fa,[$("div",null,"账户名称: "+_(k.username),1),$("div",null,"绑定时间: "+_(k.bind_time),1)])):(i(),N("div",Va,v[7]||(v[7]=[$("div",null,"尚未绑定",-1)])))]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))])]),_:1},8,["class"])]),_:1}))}}),Sa={class:"flex items-center justify-center space-x-2"},Aa=w({__name:"DiscourseTl3Requirements",setup(r){const s=P({time_period:0,requirements_met:!1,requirements_lost:!1,trust_level_locked:!1,on_grace_period:!1,days_visited:0,min_days_visited:0,num_topics_replied_to:0,min_topics_replied_to:0,topics_viewed:0,min_topics_viewed:0,posts_read:0,min_posts_read:0,topics_viewed_all_time:0,min_topics_viewed_all_time:0,posts_read_all_time:0,min_posts_read_all_time:0,num_flagged_posts:0,max_flagged_posts:0,num_flagged_by_users:0,max_flagged_by_users:0,num_likes_given:0,min_likes_given:0,num_likes_received:0,min_likes_received:0,num_likes_received_days:0,min_likes_received_days:0,num_likes_received_users:0,min_likes_received_users:0,penalty_counts:{silenced:0,suspended:0,total:0},trust_level:0,name:"",username:""});(()=>{rs.getDiscourse().then(o=>{s.value=o}).catch(o=>{E.error(o.error)})})();const n=o=>o?_e(ve,{icon:"material-symbols:check-rounded",class:"text-green-500"}):_e(ve,{icon:"material-symbols:close-rounded",class:"text-red-500"});return(o,t)=>{const d=Fe;return i(),p(e(ee),null,{default:a(()=>[l(e(se),{class:C(e(y)("dark:bg-gray-900 bg-gray-100 rounded-t-lg"))},{default:a(()=>[l(e(le),null,{default:a(()=>[f(_(s.value.name)+" - 信任级别 3 的要求",1)]),_:1})]),_:1},8,["class"]),l(e(ae),null,{default:a(()=>[t[18]||(t[18]=$("div",{class:"mt-4"},"在过去 100 天内：",-1)),l(e(Hs),null,{default:a(()=>[l(e(fa),null,{default:a(()=>[$("div",Sa,[(i(),p(q(n(s.value.requirements_met)))),$("div",null,_(s.value.requirements_met?"符合":"不符合")+" 信任级别 3 的要求.",1)])]),_:1}),l(e(Ms),null,{default:a(()=>[l(e(Z),null,{default:a(()=>[l(e(oe)),l(e(oe)),l(e(oe),null,{default:a(()=>t[0]||(t[0]=[f("值")])),_:1}),l(e(oe),null,{default:a(()=>t[1]||(t[1]=[f("要求")])),_:1})]),_:1})]),_:1}),l(e(Es),null,{default:a(()=>[l(e(Z),null,{default:a(()=>[l(e(g),{class:C(e(y)("font-medium"))},{default:a(()=>[l(d,{class:"max-w-[100px] min-w-[30px]"},{default:a(()=>t[2]||(t[2]=[f("回复的话题")])),_:1})]),_:1},8,["class"]),l(e(g),{class:C(e(y)("w-[10px]"))},{default:a(()=>[(i(),p(q(n(s.value.num_topics_replied_to>=s.value.min_topics_replied_to))))]),_:1},8,["class"]),l(e(g),null,{default:a(()=>[f(_(s.value.num_topics_replied_to),1)]),_:1}),l(e(g),null,{default:a(()=>[f(_(s.value.min_topics_replied_to),1)]),_:1})]),_:1}),l(e(Z),null,{default:a(()=>[l(e(g),{class:C(e(y)("font-medium"))},{default:a(()=>[l(d,{class:"max-w-[100px] min-w-[30px]"},{default:a(()=>t[3]||(t[3]=[f("浏览的话题")])),_:1})]),_:1},8,["class"]),l(e(g),{class:C(e(y)("w-[10px]"))},{default:a(()=>[(i(),p(q(n(s.value.topics_viewed>=s.value.min_topics_viewed))))]),_:1},8,["class"]),l(e(g),null,{default:a(()=>[f(_(s.value.topics_viewed),1)]),_:1}),l(e(g),null,{default:a(()=>[f(_(s.value.min_topics_viewed),1)]),_:1})]),_:1}),l(e(Z),null,{default:a(()=>[l(e(g),{class:C(e(y)("font-medium"))},{default:a(()=>[l(d,{class:"max-w-[100px] min-w-[30px]"},{default:a(()=>t[4]||(t[4]=[f("浏览的话题（所有时间）")])),_:1})]),_:1},8,["class"]),l(e(g),{class:C(e(y)("w-[10px]"))},{default:a(()=>[(i(),p(q(n(s.value.topics_viewed_all_time>=s.value.min_topics_viewed_all_time))))]),_:1},8,["class"]),l(e(g),null,{default:a(()=>[f(_(s.value.topics_viewed_all_time),1)]),_:1}),l(e(g),null,{default:a(()=>[f(_(s.value.min_topics_viewed_all_time),1)]),_:1})]),_:1}),l(e(Z),null,{default:a(()=>[l(e(g),{class:C(e(y)("font-medium"))},{default:a(()=>[l(d,{class:"max-w-[100px] min-w-[30px]"},{default:a(()=>t[5]||(t[5]=[f("已读帖子")])),_:1})]),_:1},8,["class"]),l(e(g),{class:C(e(y)("w-[10px]"))},{default:a(()=>[(i(),p(q(n(s.value.posts_read>=s.value.min_posts_read))))]),_:1},8,["class"]),l(e(g),null,{default:a(()=>[f(_(s.value.posts_read),1)]),_:1}),l(e(g),null,{default:a(()=>[f(_(s.value.min_posts_read),1)]),_:1})]),_:1}),l(e(Z),null,{default:a(()=>[l(e(g),{class:C(e(y)("font-medium"))},{default:a(()=>[l(d,{class:"max-w-[100px] min-w-[30px]"},{default:a(()=>t[6]||(t[6]=[f("帖子阅读：唯一日期")])),_:1})]),_:1},8,["class"]),l(e(g),{class:C(e(y)("w-[10px]"))},{default:a(()=>[(i(),p(q(n(s.value.days_visited>=s.value.min_days_visited))))]),_:1},8,["class"]),l(e(g),null,{default:a(()=>[f(_(s.value.days_visited)+"%("+_(s.value.days_visited)+" / 100 天数)",1)]),_:1}),l(e(g),null,{default:a(()=>[f(_(s.value.min_days_visited)+"%",1)]),_:1})]),_:1}),l(e(Z),null,{default:a(()=>[l(e(g),{class:C(e(y)("font-medium"))},{default:a(()=>[l(d,{class:"max-w-[100px] min-w-[30px]"},{default:a(()=>t[7]||(t[7]=[f("已读帖子（所有时间）")])),_:1})]),_:1},8,["class"]),l(e(g),{class:C(e(y)("w-[10px]"))},{default:a(()=>[(i(),p(q(n(s.value.posts_read_all_time>=s.value.min_posts_read_all_time))))]),_:1},8,["class"]),l(e(g),null,{default:a(()=>[f(_(s.value.posts_read_all_time),1)]),_:1}),l(e(g),null,{default:a(()=>[f(_(s.value.min_posts_read_all_time),1)]),_:1})]),_:1}),l(e(Z),null,{default:a(()=>[l(e(g),{class:C(e(y)("font-medium"))},{default:a(()=>[l(d,{class:"max-w-[100px] min-w-[30px]"},{default:a(()=>t[8]||(t[8]=[f("被举报的帖子")])),_:1})]),_:1},8,["class"]),l(e(g),{class:C(e(y)("w-[10px]"))},{default:a(()=>[(i(),p(q(n(s.value.num_flagged_posts<=s.value.max_flagged_posts))))]),_:1},8,["class"]),l(e(g),null,{default:a(()=>[f(_(s.value.num_flagged_posts),1)]),_:1}),l(e(g),null,{default:a(()=>[f(" ≤ "+_(s.value.max_flagged_posts),1)]),_:1})]),_:1}),l(e(Z),null,{default:a(()=>[l(e(g),{class:C(e(y)("font-medium"))},{default:a(()=>[l(d,{class:"max-w-[100px] min-w-[30px]"},{default:a(()=>t[9]||(t[9]=[f("发起举报的用户")])),_:1})]),_:1},8,["class"]),l(e(g),{class:C(e(y)("w-[10px]"))},{default:a(()=>[(i(),p(q(n(s.value.num_flagged_by_users<=s.value.max_flagged_by_users))))]),_:1},8,["class"]),l(e(g),null,{default:a(()=>[f(_(s.value.num_flagged_by_users),1)]),_:1}),l(e(g),null,{default:a(()=>[f(" ≤ "+_(s.value.max_flagged_by_users),1)]),_:1})]),_:1}),l(e(Z),null,{default:a(()=>[l(e(g),{class:C(e(y)("font-medium"))},{default:a(()=>[l(d,{class:"max-w-[100px] min-w-[30px]"},{default:a(()=>t[10]||(t[10]=[f("点赞")])),_:1})]),_:1},8,["class"]),l(e(g),{class:C(e(y)("w-[10px]"))},{default:a(()=>[(i(),p(q(n(s.value.num_likes_given>=s.value.min_likes_given))))]),_:1},8,["class"]),l(e(g),null,{default:a(()=>[f(_(s.value.num_likes_given),1)]),_:1}),l(e(g),null,{default:a(()=>[f(_(s.value.min_likes_given),1)]),_:1})]),_:1}),l(e(Z),null,{default:a(()=>[l(e(g),{class:C(e(y)("font-medium"))},{default:a(()=>[l(d,{class:"max-w-[100px] min-w-[30px]"},{default:a(()=>t[11]||(t[11]=[f("获赞")])),_:1})]),_:1},8,["class"]),l(e(g),{class:C(e(y)("w-[10px]"))},{default:a(()=>[(i(),p(q(n(s.value.num_likes_received>=s.value.min_likes_received))))]),_:1},8,["class"]),l(e(g),null,{default:a(()=>[f(_(s.value.num_likes_received),1)]),_:1}),l(e(g),null,{default:a(()=>[f(_(s.value.min_likes_received),1)]),_:1})]),_:1}),l(e(Z),null,{default:a(()=>[l(e(g),{class:C(e(y)("font-medium"))},{default:a(()=>[l(d,{class:"max-w-[100px] min-w-[30px]"},{default:a(()=>t[12]||(t[12]=[f("获赞：单日最高数量")])),_:1})]),_:1},8,["class"]),l(e(g),{class:C(e(y)("w-[10px]"))},{default:a(()=>[(i(),p(q(n(s.value.num_likes_received_days>=s.value.min_likes_received_days))))]),_:1},8,["class"]),l(e(g),null,{default:a(()=>[f(_(s.value.num_likes_received_days),1)]),_:1}),l(e(g),null,{default:a(()=>[f(_(s.value.min_likes_received_days),1)]),_:1})]),_:1}),l(e(Z),null,{default:a(()=>[l(e(g),{class:C(e(y)("font-medium"))},{default:a(()=>[l(d,{class:"max-w-[100px] min-w-[30px]"},{default:a(()=>t[13]||(t[13]=[f("获赞：点赞用户数量")])),_:1})]),_:1},8,["class"]),l(e(g),{class:C(e(y)("w-[10px]"))},{default:a(()=>[(i(),p(q(n(s.value.num_likes_received_users>=s.value.min_likes_received_users))))]),_:1},8,["class"]),l(e(g),null,{default:a(()=>[f(_(s.value.num_likes_received_users),1)]),_:1}),l(e(g),null,{default:a(()=>[f(_(s.value.min_likes_received_users),1)]),_:1})]),_:1}),l(e(Z),null,{default:a(()=>[l(e(g),{class:C(e(y)("font-medium"))},{default:a(()=>[l(d,{class:"max-w-[100px] min-w-[30px]"},{default:a(()=>t[14]||(t[14]=[f("被禁言（过去 6 个月）")])),_:1})]),_:1},8,["class"]),l(e(g),{class:C(e(y)("w-[10px]"))},{default:a(()=>[(i(),p(q(n(s.value.penalty_counts.silenced>=0))))]),_:1},8,["class"]),l(e(g),null,{default:a(()=>[f(_(s.value.penalty_counts.silenced),1)]),_:1}),l(e(g),null,{default:a(()=>t[15]||(t[15]=[f("0")])),_:1})]),_:1}),l(e(Z),null,{default:a(()=>[l(e(g),{class:C(e(y)("font-medium"))},{default:a(()=>[l(d,{class:"max-w-[100px] min-w-[30px]"},{default:a(()=>t[16]||(t[16]=[f("被封禁（过去 6 个月）")])),_:1})]),_:1},8,["class"]),l(e(g),{class:C(e(y)("w-[10px]"))},{default:a(()=>[(i(),p(q(n(s.value.penalty_counts.suspended>=0))))]),_:1},8,["class"]),l(e(g),null,{default:a(()=>[f(_(s.value.penalty_counts.suspended),1)]),_:1}),l(e(g),null,{default:a(()=>t[17]||(t[17]=[f("0")])),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})}}});function j(r){let s=r.replace(/\[\d+\]/g,"").replace(/([A-Z])/g," $1");return s=s.charAt(0).toUpperCase()+s.slice(1),s}function qa(r){const s=/\[(\d+)\]/,u=r.match(s);return u?Number.parseInt(u[1]):void 0}function W(r){return r?"innerType"in r._def?W(r._def.innerType):"schema"in r._def?W(r._def.schema):r:null}function me(r){const s=W(r);return s?s._def.typeName:""}function de(r){const s=r;if(s._def.typeName==="ZodDefault")return s._def.defaultValue();if("innerType"in s._def)return de(s._def.innerType);if("schema"in s._def)return de(s._def.schema)}function Ue(r){return(r==null?void 0:r._def.typeName)==="ZodEffects"?Ue(r._def.schema):r}function Re(r){return/^\[.+\]$/.test(r)}function Pa(r){return r!==null&&!!r&&typeof r=="object"&&!Array.isArray(r)}function Za(r){return Pa(r)||Array.isArray(r)}function La(r){return Re(r)?r.replace(/\[|\]/g,""):r}function ge(r,s,u){return r?Re(s)?r[La(s)]:(s||"").split(/\.|\[(\d+)\]/).filter(Boolean).reduce((o,t)=>Za(o)&&t in o?o[t]:u,r):u}const Da=["id"],X=w({__name:"FormDescription",props:{class:{}},setup(r){const s=r,{formDescriptionId:u}=Js();return(n,o)=>(i(),N("p",{id:e(u),class:C(e(y)("text-sm text-muted-foreground",s.class))},[B(n.$slots,"default")],10,Da))}}),Ia={key:0,class:"text-destructive"},z=w({__name:"AutoFormLabel",props:{required:{type:Boolean}},setup(r){return(s,u)=>(i(),p(e(Xs),null,{default:a(()=>[B(s.$slots,"default"),s.required?(i(),N("span",Ia," *")):A("",!0)]),_:3}))}}),Te=w({__name:"Accordion",props:{collapsible:{type:Boolean},disabled:{type:Boolean},dir:{},orientation:{},asChild:{type:Boolean},as:{},type:{},modelValue:{},defaultValue:{}},emits:["update:modelValue"],setup(r,{emit:s}){const o=te(r,s);return(t,d)=>(i(),p(e(is),L(D(e(o))),{default:a(()=>[B(t.$slots,"default")]),_:3},16))}}),ze=w({__name:"AccordionContent",props:{asChild:{type:Boolean},as:{},class:{}},setup(r){const s=r,u=V(()=>{const{class:n,...o}=s;return o});return(n,o)=>(i(),p(e(cs),S(u.value,{class:"overflow-hidden text-sm data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down"}),{default:a(()=>[$("div",{class:C(e(y)("pb-4 pt-0",s.class))},[B(n.$slots,"default")],2)]),_:3},16))}}),Ge=w({__name:"AccordionItem",props:{disabled:{type:Boolean},value:{},asChild:{type:Boolean},as:{},class:{}},setup(r){const s=r,u=V(()=>{const{class:o,...t}=s;return t}),n=O(u);return(o,t)=>(i(),p(e(fs),S(e(n),{class:e(y)("border-b",s.class)}),{default:a(()=>[B(o.$slots,"default")]),_:3},16,["class"]))}}),Qe=w({__name:"AccordionTrigger",props:{asChild:{type:Boolean},as:{},class:{}},setup(r){const s=r,u=V(()=>{const{class:n,...o}=s;return o});return(n,o)=>(i(),p(e(ms),{class:"flex"},{default:a(()=>[l(e(ps),S(u.value,{class:e(y)("flex flex-1 items-center justify-between py-4 text-sm font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",s.class)}),{default:a(()=>[B(n.$slots,"default"),B(n.$slots,"icon",{},()=>[l(e(js),{class:"h-4 w-4 shrink-0 text-muted-foreground transition-transform duration-200"})])]),_:3},16,["class"])]),_:3}))}}),Oa={class:"!my-4 flex justify-end"},Ha=w({__name:"AutoFormFieldArray",props:{fieldName:{},required:{type:Boolean},config:{},schema:{},disabled:{type:Boolean}},setup(r){const s=r;function u(d){return d instanceof ea}function n(d){return d instanceof sa}const o=V(()=>{if(!s.schema)return;const d=u(s.schema)?s.schema._def.type:n(s.schema)?s.schema._def.innerType._def.type:null;return{type:me(d),schema:d}}),t=Oe(s.fieldName);return xe(He,t),(d,c)=>(i(),p(e(Ys),{as:"section",name:d.fieldName},{default:a(({fields:m,remove:h,push:b})=>[B(d.$slots,"default",L(D(s)),()=>[l(e(Te),{type:"multiple",class:"w-full",collapsible:"",disabled:d.disabled,"as-child":""},{default:a(()=>[l(e(T),null,{default:a(()=>[l(e(Ge),{value:d.fieldName,class:"border-none"},{default:a(()=>[l(e(Qe),null,{default:a(()=>[l(z,{class:"text-base",required:d.required},{default:a(()=>{var v;return[f(_(((v=d.schema)==null?void 0:v.description)||e(j)(d.fieldName)),1)]}),_:1},8,["required"])]),_:1}),l(e(ze),null,{default:a(()=>[(i(!0),N(M,null,H(m,(v,k)=>(i(),N("div",{key:v.key,class:"mb-4 p-1"},[l(ue,{"field-name":`${d.fieldName}[${k}]`,label:d.fieldName,shape:o.value,config:d.config},null,8,["field-name","label","shape","config"]),$("div",Oa,[l(e(R),{type:"button",size:"icon",variant:"secondary",onClick:F=>h(k)},{default:a(()=>[l(e(Ca),{size:16})]),_:2},1032,["onClick"])]),v.isLast?A("",!0):(i(),p(e(na),{key:0}))]))),128)),l(e(R),{type:"button",variant:"secondary",class:"mt-4 flex items-center",onClick:v=>b(null)},{default:a(()=>[l(e(ra),{class:"mr-2",size:16}),c[0]||(c[0]=f(" Add "))]),_:2},1032,["onClick"])]),_:2},1024),l(e(G))]),_:2},1032,["value"])]),_:2},1024)]),_:2},1032,["disabled"])])]),_:3},8,["name"]))}}),Ma=w({__name:"Checkbox",props:{defaultChecked:{type:Boolean},checked:{type:[Boolean,String]},disabled:{type:Boolean},required:{type:Boolean},name:{},value:{},id:{},asChild:{type:Boolean},as:{},class:{}},emits:["update:checked"],setup(r,{emit:s}){const u=r,n=s,o=V(()=>{const{class:d,...c}=u;return c}),t=te(o,n);return(d,c)=>(i(),p(e(vs),S(e(t),{class:e(y)("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",u.class)}),{default:a(()=>[l(e(_s),{class:"flex h-full w-full items-center justify-center text-current"},{default:a(()=>[B(d.$slots,"default",{},()=>[l(e(Ie),{class:"h-4 w-4"})])]),_:3})]),_:3},16,["class"]))}}),Ea={class:"space-y-0 mb-3 flex items-center gap-3"},be=w({__name:"AutoFormFieldBoolean",props:{fieldName:{},label:{},required:{type:Boolean},config:{},disabled:{type:Boolean}},setup(r){const s=r,u=V(()=>{var n;return((n=s.config)==null?void 0:n.component)==="switch"?je:Ma});return(n,o)=>(i(),p(e(J),{name:n.fieldName},{default:a(t=>[l(e(T),null,{default:a(()=>{var d,c;return[$("div",Ea,[l(e(K),null,{default:a(()=>[B(n.$slots,"default",L(D(t)),()=>[(i(),p(q(u.value),S({...t.componentField},{disabled:n.disabled,checked:t.componentField.modelValue,"onUpdate:checked":t.componentField["onUpdate:modelValue"]}),null,16,["disabled","checked","onUpdate:checked"]))])]),_:2},1024),(d=n.config)!=null&&d.hideLabel?A("",!0):(i(),p(z,{key:0,required:n.required},{default:a(()=>{var m;return[f(_(((m=n.config)==null?void 0:m.label)||e(j)(n.label??n.fieldName)),1)]}),_:1},8,["required"]))]),(c=n.config)!=null&&c.description?(i(),p(e(X),{key:0},{default:a(()=>[f(_(n.config.description),1)]),_:1})):A("",!0),l(e(G))]}),_:2},1024)]),_:3},8,["name"]))}}),ja={class:"flex flex-col gap-y-4 mt-4 sm:flex-row sm:gap-x-4 sm:gap-y-0"},Ua=w({__name:"Calendar",props:{modelValue:{},multiple:{type:Boolean},defaultValue:{},defaultPlaceholder:{},placeholder:{},pagedNavigation:{type:Boolean},preventDeselect:{type:Boolean},weekStartsOn:{},weekdayFormat:{},calendarLabel:{},fixedWeeks:{type:Boolean},maxValue:{},minValue:{},locale:{},numberOfMonths:{},disabled:{type:Boolean},readonly:{type:Boolean},initialFocus:{type:Boolean},isDateDisabled:{type:Function},isDateUnavailable:{type:Function},dir:{},nextPage:{type:Function},prevPage:{type:Function},asChild:{type:Boolean},as:{},class:{}},emits:["update:modelValue","update:placeholder"],setup(r,{emit:s}){const u=r,n=s,o=V(()=>{const{class:d,...c}=u;return c}),t=te(o,n);return(d,c)=>(i(),p(e(gs),S({class:e(y)("p-3",u.class)},e(t)),{default:a(({grid:m,weekDays:h})=>[l(e(Ka),null,{default:a(()=>[l(e(Ya)),l(e(Ja)),l(e(Xa))]),_:1}),$("div",ja,[(i(!0),N(M,null,H(m,b=>(i(),p(e(za),{key:b.value.toString()},{default:a(()=>[l(e(Qa),null,{default:a(()=>[l(e(ye),null,{default:a(()=>[(i(!0),N(M,null,H(h,v=>(i(),p(e(Wa),{key:v},{default:a(()=>[f(_(v),1)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024),l(e(Ga),null,{default:a(()=>[(i(!0),N(M,null,H(b.rows,(v,k)=>(i(),p(e(ye),{key:`weekDate-${k}`,class:"mt-2 w-full"},{default:a(()=>[(i(!0),N(M,null,H(v,F=>(i(),p(e(Ra),{key:F.toString(),date:F},{default:a(()=>[l(e(Ta),{day:F,month:b.value},null,8,["day","month"])]),_:2},1032,["date"]))),128))]),_:2},1024))),128))]),_:2},1024)]),_:2},1024))),128))])]),_:1},16,["class"]))}}),Ra=w({__name:"CalendarCell",props:{date:{},asChild:{type:Boolean},as:{},class:{}},setup(r){const s=r,u=V(()=>{const{class:o,...t}=s;return t}),n=O(u);return(o,t)=>(i(),p(e(bs),S({class:e(y)("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([data-selected])]:rounded-md [&:has([data-selected])]:bg-accent [&:has([data-selected][data-outside-view])]:bg-accent/50",s.class)},e(n)),{default:a(()=>[B(o.$slots,"default")]),_:3},16,["class"]))}}),Ta=w({__name:"CalendarCellTrigger",props:{day:{},month:{},asChild:{type:Boolean},as:{},class:{}},setup(r){const s=r,u=V(()=>{const{class:o,...t}=s;return t}),n=O(u);return(o,t)=>(i(),p(e(ys),S({class:e(y)(e(ce)({variant:"ghost"}),"h-8 w-8 p-0 font-normal","[&[data-today]:not([data-selected])]:bg-accent [&[data-today]:not([data-selected])]:text-accent-foreground","data-[selected]:bg-primary data-[selected]:text-primary-foreground data-[selected]:opacity-100 data-[selected]:hover:bg-primary data-[selected]:hover:text-primary-foreground data-[selected]:focus:bg-primary data-[selected]:focus:text-primary-foreground","data-[disabled]:text-muted-foreground data-[disabled]:opacity-50","data-[unavailable]:text-destructive-foreground data-[unavailable]:line-through","data-[outside-view]:text-muted-foreground data-[outside-view]:opacity-50 [&[data-outside-view][data-selected]]:bg-accent/50 [&[data-outside-view][data-selected]]:text-muted-foreground [&[data-outside-view][data-selected]]:opacity-30",s.class)},e(n)),{default:a(()=>[B(o.$slots,"default")]),_:3},16,["class"]))}}),za=w({__name:"CalendarGrid",props:{asChild:{type:Boolean},as:{},class:{}},setup(r){const s=r,u=V(()=>{const{class:o,...t}=s;return t}),n=O(u);return(o,t)=>(i(),p(e(hs),S({class:e(y)("w-full border-collapse space-y-1",s.class)},e(n)),{default:a(()=>[B(o.$slots,"default")]),_:3},16,["class"]))}}),Ga=w({__name:"CalendarGridBody",props:{asChild:{type:Boolean},as:{}},setup(r){const s=r;return(u,n)=>(i(),p(e(ws),L(D(s)),{default:a(()=>[B(u.$slots,"default")]),_:3},16))}}),Qa=w({__name:"CalendarGridHead",props:{asChild:{type:Boolean},as:{},class:{}},setup(r){const s=r;return(u,n)=>(i(),p(e(Cs),L(D(s)),{default:a(()=>[B(u.$slots,"default")]),_:3},16))}}),ye=w({__name:"CalendarGridRow",props:{asChild:{type:Boolean},as:{},class:{}},setup(r){const s=r,u=V(()=>{const{class:o,...t}=s;return t}),n=O(u);return(o,t)=>(i(),p(e($s),S({class:e(y)("flex",s.class)},e(n)),{default:a(()=>[B(o.$slots,"default")]),_:3},16,["class"]))}}),Wa=w({__name:"CalendarHeadCell",props:{asChild:{type:Boolean},as:{},class:{}},setup(r){const s=r,u=V(()=>{const{class:o,...t}=s;return t}),n=O(u);return(o,t)=>(i(),p(e(xs),S({class:e(y)("w-8 rounded-md text-[0.8rem] font-normal text-muted-foreground",s.class)},e(n)),{default:a(()=>[B(o.$slots,"default")]),_:3},16,["class"]))}}),Ka=w({__name:"CalendarHeader",props:{asChild:{type:Boolean},as:{},class:{}},setup(r){const s=r,u=V(()=>{const{class:o,...t}=s;return t}),n=O(u);return(o,t)=>(i(),p(e(ks),S({class:e(y)("relative flex w-full items-center justify-between pt-1",s.class)},e(n)),{default:a(()=>[B(o.$slots,"default")]),_:3},16,["class"]))}}),Ja=w({__name:"CalendarHeading",props:{asChild:{type:Boolean},as:{},class:{}},setup(r){const s=r,u=V(()=>{const{class:o,...t}=s;return t}),n=O(u);return(o,t)=>(i(),p(e(Bs),S({class:e(y)("text-sm font-medium",s.class)},e(n)),{default:a(({headingValue:d})=>[B(o.$slots,"default",{headingValue:d},()=>[f(_(d),1)])]),_:3},16,["class"]))}}),Xa=w({__name:"CalendarNextButton",props:{step:{},nextPage:{type:Function},asChild:{type:Boolean},as:{},class:{}},setup(r){const s=r,u=V(()=>{const{class:o,...t}=s;return t}),n=O(u);return(o,t)=>(i(),p(e(Fs),S({class:e(y)(e(ce)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100",s.class)},e(n)),{default:a(()=>[B(o.$slots,"default",{},()=>[l(e(ia),{class:"h-4 w-4"})])]),_:3},16,["class"]))}}),Ya=w({__name:"CalendarPrevButton",props:{step:{},prevPage:{type:Function},asChild:{type:Boolean},as:{},class:{}},setup(r){const s=r,u=V(()=>{const{class:o,...t}=s;return t}),n=O(u);return(o,t)=>(i(),p(e(Vs),S({class:e(y)(e(ce)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100",s.class)},e(n)),{default:a(()=>[B(o.$slots,"default",{},()=>[l(e(ua),{class:"h-4 w-4"})])]),_:3},16,["class"]))}}),el=w({__name:"AutoFormFieldDate",props:{fieldName:{},label:{},required:{type:Boolean},config:{},disabled:{type:Boolean}},setup(r){const s=new Ns("en-US",{dateStyle:"long"});return(u,n)=>(i(),p(e(J),{name:u.fieldName},{default:a(o=>[l(e(T),null,{default:a(()=>{var t,d;return[(t=u.config)!=null&&t.hideLabel?A("",!0):(i(),p(z,{key:0,required:u.required},{default:a(()=>{var c;return[f(_(((c=u.config)==null?void 0:c.label)||e(j)(u.label??u.fieldName)),1)]}),_:1},8,["required"])),l(e(K),null,{default:a(()=>[B(u.$slots,"default",L(D(o)),()=>[$("div",null,[l(e(Us),null,{default:a(()=>[l(e(Rs),{"as-child":"",disabled:u.disabled},{default:a(()=>[l(e(R),{variant:"outline",class:C(e(y)("w-full justify-start text-left font-normal",!o.componentField.modelValue&&"text-muted-foreground"))},{default:a(()=>[l(e(da),{class:"mr-2 h-4 w-4"}),f(" "+_(o.componentField.modelValue?e(s).format(o.componentField.modelValue.toDate(e(Ss)())):"Pick a date"),1)]),_:2},1032,["class"])]),_:2},1032,["disabled"]),l(e(Ts),{class:"w-auto p-0"},{default:a(()=>[l(e(Ua),S({"initial-focus":""},o.componentField),null,16)]),_:2},1024)]),_:2},1024)])])]),_:2},1024),(d=u.config)!=null&&d.description?(i(),p(e(X),{key:1},{default:a(()=>[f(_(u.config.description),1)]),_:1})):A("",!0),l(e(G))]}),_:2},1024)]),_:3},8,["name"]))}}),sl=w({__name:"RadioGroup",props:{modelValue:{},defaultValue:{},disabled:{type:Boolean},name:{},required:{type:Boolean},orientation:{},dir:{},loop:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["update:modelValue"],setup(r,{emit:s}){const u=r,n=s,o=V(()=>{const{class:d,...c}=u;return c}),t=te(o,n);return(d,c)=>(i(),p(e(As),S({class:e(y)("grid gap-2",u.class)},e(t)),{default:a(()=>[B(d.$slots,"default")]),_:3},16,["class"]))}}),al=w({__name:"RadioGroupItem",props:{id:{},value:{},disabled:{type:Boolean},required:{type:Boolean},name:{},asChild:{type:Boolean},as:{},class:{}},setup(r){const s=r,u=V(()=>{const{class:o,...t}=s;return t}),n=O(u);return(o,t)=>(i(),p(e(Ps),S(e(n),{class:e(y)("aspect-square h-4 w-4 rounded-full border border-primary text-primary shadow focus:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",s.class)}),{default:a(()=>[l(e(qs),{class:"flex items-center justify-center"},{default:a(()=>[l(e(Ie),{class:"h-3.5 w-3.5 fill-primary"})]),_:1})]),_:1},16,["class"]))}}),he=w({__name:"AutoFormFieldEnum",props:{fieldName:{},label:{},required:{type:Boolean},config:{},disabled:{type:Boolean},options:{}},setup(r){return(s,u)=>(i(),p(e(J),{name:s.fieldName},{default:a(n=>[l(e(T),null,{default:a(()=>{var o,t;return[(o=s.config)!=null&&o.hideLabel?A("",!0):(i(),p(z,{key:0,required:s.required},{default:a(()=>{var d;return[f(_(((d=s.config)==null?void 0:d.label)||e(j)(s.label??s.fieldName)),1)]}),_:1},8,["required"])),l(e(K),null,{default:a(()=>[B(s.$slots,"default",L(D(n)),()=>{var d;return[((d=s.config)==null?void 0:d.component)==="radio"?(i(),p(e(sl),S({key:0,disabled:s.disabled,orientation:"vertical"},{...n.componentField}),{default:a(()=>[(i(!0),N(M,null,H(s.options,(c,m)=>(i(),N("div",{key:c,class:"mb-2 flex items-center gap-3 space-y-0"},[l(e(al),{id:`${c}-${m}`,value:c},null,8,["id","value"]),l(e(U),{for:`${c}-${m}`},{default:a(()=>[f(_(e(j)(c)),1)]),_:2},1032,["for"])]))),128))]),_:2},1040,["disabled"])):(i(),p(e(zs),S({key:1,disabled:s.disabled},{...n.componentField}),{default:a(()=>[l(e(Gs),{class:"w-full"},{default:a(()=>{var c,m;return[l(e(Qs),{placeholder:(m=(c=s.config)==null?void 0:c.inputProps)==null?void 0:m.placeholder},null,8,["placeholder"])]}),_:1}),l(e(Ws),null,{default:a(()=>[(i(!0),N(M,null,H(s.options,c=>(i(),p(e(Ks),{key:c,value:c},{default:a(()=>[f(_(e(j)(c)),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:2},1040,["disabled"]))]})]),_:2},1024),(t=s.config)!=null&&t.description?(i(),p(e(X),{key:1},{default:a(()=>[f(_(s.config.description),1)]),_:1})):A("",!0),l(e(G))]}),_:2},1024)]),_:3},8,["name"]))}}),ll={key:1,class:"flex h-9 w-full items-center justify-between rounded-md border border-input bg-transparent pl-3 pr-1 py-1 text-sm shadow-sm transition-colors"},tl=w({__name:"AutoFormFieldFile",props:{fieldName:{},label:{},required:{type:Boolean},config:{},disabled:{type:Boolean}},setup(r){const s=P();async function u(n){return new Promise((o,t)=>{if(n){const d=new FileReader;d.onloadend=()=>{o(d.result)},d.onerror=c=>{t(c)},d.readAsDataURL(n)}})}return(n,o)=>(i(),p(e(J),{name:n.fieldName},{default:a(t=>[l(e(T),L(D(n.$attrs)),{default:a(()=>{var d,c;return[(d=n.config)!=null&&d.hideLabel?A("",!0):(i(),p(z,{key:0,required:n.required},{default:a(()=>{var m;return[f(_(((m=n.config)==null?void 0:m.label)||e(j)(n.label??n.fieldName)),1)]}),_:1},8,["required"])),l(e(K),null,{default:a(()=>[B(n.$slots,"default",L(D(t)),()=>{var m,h;return[s.value?(i(),N("div",ll,[$("p",null,_((h=s.value)==null?void 0:h.name),1),l(e(R),{size:"icon",variant:"ghost",class:"h-[26px] w-[26px]","aria-label":"Remove file",type:"button",onClick:()=>{s.value=void 0,t.componentField.onInput(void 0)}},{default:a(()=>[l(e(ca))]),_:2},1032,["onClick"])])):(i(),p(e(pe),S({key:0,type:"file"},{...(m=n.config)==null?void 0:m.inputProps},{disabled:n.disabled,onChange:async b=>{var F;const v=(F=b.target.files)==null?void 0:F[0];s.value=v;const k=await u(v);t.componentField.onInput(k)}}),null,16,["disabled","onChange"]))]})]),_:2},1024),(c=n.config)!=null&&c.description?(i(),p(e(X),{key:1},{default:a(()=>[f(_(n.config.description),1)]),_:1})):A("",!0),l(e(G))]}),_:2},1040)]),_:3},8,["name"]))}}),nl=w({__name:"Textarea",props:{class:{},defaultValue:{},modelValue:{}},emits:["update:modelValue"],setup(r,{emit:s}){const u=r,o=as(u,"modelValue",s,{passive:!0,defaultValue:u.defaultValue});return(t,d)=>ls((i(),N("textarea",{"onUpdate:modelValue":d[0]||(d[0]=c=>ns(o)?o.value=c:null),class:C(e(y)("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",u.class))},null,2)),[[ts,e(o)]])}}),we=w({__name:"AutoFormFieldInput",props:{fieldName:{},label:{},required:{type:Boolean},config:{},disabled:{type:Boolean}},setup(r){const s=r,u=V(()=>{var n;return((n=s.config)==null?void 0:n.component)==="textarea"?nl:pe});return(n,o)=>(i(),p(e(J),{name:n.fieldName},{default:a(t=>[l(e(T),L(D(n.$attrs)),{default:a(()=>{var d,c;return[(d=n.config)!=null&&d.hideLabel?A("",!0):(i(),p(z,{key:0,required:n.required},{default:a(()=>{var m;return[f(_(((m=n.config)==null?void 0:m.label)||e(j)(n.label??n.fieldName)),1)]}),_:1},8,["required"])),l(e(K),null,{default:a(()=>[B(n.$slots,"default",L(D(t)),()=>{var m;return[(i(),p(q(u.value),S({type:"text"},{...t.componentField,...(m=n.config)==null?void 0:m.inputProps},{disabled:n.disabled}),null,16,["disabled"]))]})]),_:2},1024),(c=n.config)!=null&&c.description?(i(),p(e(X),{key:1},{default:a(()=>[f(_(n.config.description),1)]),_:1})):A("",!0),l(e(G))]}),_:2},1040)]),_:3},8,["name"]))}}),ol=w({inheritAttrs:!1,__name:"AutoFormFieldNumber",props:{fieldName:{},label:{},required:{type:Boolean},config:{},disabled:{type:Boolean}},setup(r){return(s,u)=>(i(),p(e(J),{name:s.fieldName},{default:a(n=>[l(e(T),null,{default:a(()=>{var o,t;return[(o=s.config)!=null&&o.hideLabel?A("",!0):(i(),p(z,{key:0,required:s.required},{default:a(()=>{var d;return[f(_(((d=s.config)==null?void 0:d.label)||e(j)(s.label??s.fieldName)),1)]}),_:1},8,["required"])),l(e(K),null,{default:a(()=>[B(s.$slots,"default",L(D(n)),()=>{var d;return[l(e(pe),S({type:"number"},{...n.componentField,...(d=s.config)==null?void 0:d.inputProps},{disabled:s.disabled}),null,16,["disabled"])]})]),_:2},1024),(t=s.config)!=null&&t.description?(i(),p(e(X),{key:1},{default:a(()=>[f(_(s.config.description),1)]),_:1})):A("",!0),l(e(G))]}),_:2},1024)]),_:3},8,["name"]))}}),rl=w({__name:"AutoFormFieldObject",props:{fieldName:{},required:{type:Boolean},config:{},schema:{},disabled:{type:Boolean}},setup(r){const s=r,u=V(()=>{var d;const o={};if(!s.schema)return;const t=(d=W(s.schema))==null?void 0:d.shape;if(t)return Object.keys(t).forEach(c=>{const m=t[c],h=W(m);let b=h&&"values"in h._def?h._def.values:void 0;!Array.isArray(b)&&typeof b=="object"&&(b=Object.values(b)),o[c]={type:me(m),default:de(m),options:b,required:!["ZodOptional","ZodNullable"].includes(m._def.typeName),schema:m}}),o}),n=Oe(s.fieldName);return xe(He,n),(o,t)=>(i(),N("section",null,[B(o.$slots,"default",L(D(s)),()=>[l(e(Te),{type:"single","as-child":"",class:"w-full",collapsible:"",disabled:o.disabled},{default:a(()=>[l(e(T),null,{default:a(()=>[l(e(Ge),{value:o.fieldName,class:"border-none"},{default:a(()=>[l(e(Qe),null,{default:a(()=>[l(z,{class:"text-base",required:o.required},{default:a(()=>{var d;return[f(_(((d=o.schema)==null?void 0:d.description)||e(j)(o.fieldName)),1)]}),_:1},8,["required"])]),_:1}),l(e(ze),{class:"p-1 space-y-5"},{default:a(()=>[(i(!0),N(M,null,H(u.value,(d,c)=>{var m;return i(),p(ue,{key:c,config:(m=o.config)==null?void 0:m[c],"field-name":`${o.fieldName}.${c.toString()}`,label:c.toString(),shape:d},null,8,["config","field-name","label","shape"])}),128))]),_:1})]),_:1},8,["value"])]),_:1})]),_:1},8,["disabled"])])]))}}),Ce={date:el,select:he,radio:he,checkbox:be,switch:be,textarea:we,number:ol,string:we,file:tl,array:Ha,object:rl},dl={ZodString:"string",ZodBoolean:"checkbox",ZodDate:"date",ZodEnum:"select",ZodNativeEnum:"select",ZodNumber:"number",ZodArray:"array",ZodObject:"object"};var Y=(r=>(r[r.DISABLES=0]="DISABLES",r[r.REQUIRES=1]="REQUIRES",r[r.HIDES=2]="HIDES",r[r.SETS_OPTIONS=3]="SETS_OPTIONS",r))(Y||{});const[ul,il]=Zs("AutoFormDependencies");function cl(r){const s=aa(),u=r.replace(/\[\d+\]/g,""),n=la(r);if(!s)throw new Error("useDependencies should be used within <AutoForm>");const o=ul(),t=P(!1),d=P(!1),c=P(!1),m=P(),h=V(()=>{var F;return(F=o.value)==null?void 0:F.filter(x=>x.targetField===u)});function b(F){const x=F.sourceField,I=qa(r)??-1,[Q,...Ke]=x.split(".").toReversed(),[hl,...Je]=F.targetField.split(".").toReversed();if(I>=0&&Ke.join(",")===Je.join(",")){const[wl,...Xe]=r.split(".").toReversed();return ge(s.value,Xe.join(".")+Q)}return ge(s.value,x)}const v=V(()=>{var F;return(F=h.value)==null?void 0:F.map(x=>b(x))}),k=()=>{t.value=!1,d.value=!1,c.value=!1,m.value=void 0};return $e([v,o],()=>{var F;k(),(F=h.value)==null||F.forEach(x=>{const I=b(x),Q=x.when(I,n.value);switch(x.type){case Y.DISABLES:Q&&(t.value=!0);break;case Y.REQUIRES:Q&&(c.value=!0);break;case Y.HIDES:Q&&(d.value=!0);break;case Y.SETS_OPTIONS:Q&&(m.value=x.options);break}})},{immediate:!0,deep:!0}),{isDisabled:t,isHidden:d,isRequired:c,overrideOptions:m}}const ue=w({__name:"AutoFormField",props:{fieldName:{},shape:{},config:{}},setup(r){const s=r;function u(m){return!!(m!=null&&m.component)}const n=V(()=>{var m,h;if(["ZodObject","ZodArray"].includes((m=s.shape)==null?void 0:m.type))return{schema:(h=s.shape)==null?void 0:h.schema}}),{isDisabled:o,isHidden:t,isRequired:d,overrideOptions:c}=cl(s.fieldName);return(m,h)=>{var b;return e(t)?A("",!0):(i(),p(q(u(m.config)?typeof m.config.component=="string"?e(Ce)[m.config.component]:m.config.component:e(Ce)[e(dl)[m.shape.type]]),S({key:0,"field-name":m.fieldName,label:(b=m.shape.schema)==null?void 0:b.description,required:e(d)||m.shape.required,options:e(c)||m.shape.options,disabled:e(o),config:m.config},n.value),{default:a(()=>[B(m.$slots,"default")]),_:3},16,["field-name","label","required","options","disabled","config"]))}}}),We=w({__name:"AutoForm",props:{schema:{},form:{},fieldConfig:{},dependencies:{}},emits:["submit"],setup(r,{emit:s}){const u=r,n=s,{dependencies:o}=os(u);il(o);const t=V(()=>{const h={},v=Ue(u.schema).shape;return Object.keys(v).forEach(k=>{const F=v[k],x=W(F);let I=x&&"values"in x._def?x._def.values:void 0;!Array.isArray(I)&&typeof I=="object"&&(I=Object.values(I)),h[k]={type:me(F),default:de(F),options:I,required:!["ZodOptional","ZodNullable"].includes(F._def.typeName),schema:x}}),h}),d=V(()=>{var b;const h={};for(const v in t.value){const k=t.value[v];h[v]={shape:k,config:(b=u.fieldConfig)==null?void 0:b[v],fieldName:v}}return h}),c=V(()=>u.form?"form":ta),m=V(()=>u.form?{onSubmit:u.form.handleSubmit(h=>n("submit",h))}:{keepValues:!0,validationSchema:fe(u.schema),onSubmit:b=>n("submit",b)});return(h,b)=>(i(),p(q(c.value),L(D(m.value)),{default:a(()=>[B(h.$slots,"customAutoForm",{fields:d.value},()=>[(i(!0),N(M,null,H(t.value,(v,k)=>{var F;return B(h.$slots,k.toString(),{key:k,shape:v,fieldName:k.toString(),config:(F=h.fieldConfig)==null?void 0:F[k]},()=>{var x;return[l(ue,{config:(x=h.fieldConfig)==null?void 0:x[k],"field-name":k.toString(),shape:v},null,8,["config","field-name","shape"])]})}),128))]),B(h.$slots,"default",{shapes:t.value})]),_:3},16))}}),fl={class:"grid gap-4"},pl=w({__name:"UpdatePassword",setup(r){const s=P(!1),u=Me({current_password:re({description:"旧密码",required_error:"旧密码不能为空"}).min(6,{message:"密码长度不能少于6位"}).max(24,{message:"密码长度不能超过24位"}),new_password:re({description:"新密码",required_error:"新密码不能为空"}).min(6,{message:"密码长度不能少于6位"}).max(24,{message:"密码长度不能超过24位"}),new_confirm_password:re({description:"确认密码",required_error:"确认密码不能为空"}).min(6,{message:"密码长度不能少于6位"}).max(24,{message:"密码长度不能超过24位"})}).refine(t=>t.new_password===t.new_confirm_password,{message:"两次输入的密码不一致",path:["confirm_password"]}),n=Ee({validationSchema:fe(u)}),o=t=>{s.value=!0;const d={old_password:t.current_password,password:t.new_password,confirm_password:t.new_confirm_password};Be.updateAccountPassword(d).then(()=>{E.success("密码更新成功"),ke(()=>{s.value=!1,n.resetForm()})}).catch(c=>{s.value=!1,E.error(c.error)})};return(t,d)=>(i(),p(e(ee),null,{default:a(()=>[l(e(se),{class:"dark:bg-gray-900 bg-gray-100 rounded-t-lg"},{default:a(()=>[l(e(le),null,{default:a(()=>d[0]||(d[0]=[f("登录密码")])),_:1})]),_:1}),l(e(ae),{class:"grid gap-4 p-6 text-sm"},{default:a(()=>[$("div",fl,[l(e(We),{class:"space-y-6",form:e(n),schema:e(u),onSubmit:o,"field-config":{current_password:{inputProps:{type:"password"}},new_password:{inputProps:{type:"password"}},new_confirm_password:{inputProps:{type:"password"}}}},{default:a(()=>[l(e(R),{type:"submit",disabled:s.value},{default:a(()=>d[1]||(d[1]=[f("更新密码")])),_:1},8,["disabled"])]),_:1},8,["form","schema"])])]),_:1})]),_:1}))}}),ml={class:"grid gap-4"},_l={class:"flex items-start gap-3"},vl={class:"flex-1"},gl={key:0,class:"text-red-500"},bl=w({__name:"UpdateAccount",setup(r){const s=P(!1),u=P(!1),n=P(""),o=P({}),t=()=>{c.submitForm,u.value=!0,Be.updateAccountUsername({username:o.value.username}).then(()=>{u.value=!1,s.value=!1,ke(()=>{c.resetForm(),ie().initUserInfo(),E.success("用户名更新成功")})}).catch(h=>{u.value=!1,s.value=!1,E.error(h.error),n.value=h.error})},d=Me({username:re({description:"用户名",required_error:"用户名不能为空"}).min(6,{message:"用户名长度不能少于6个字符"}).max(20,{message:"用户名长度不能超过20个字符"})}),c=Ee({validationSchema:fe(d)}),m=h=>{o.value=h,s.value=!0};return(h,b)=>(i(),p(e(ee),null,{default:a(()=>[l(e(se),{class:"dark:bg-gray-900 bg-gray-100 rounded-t-lg"},{default:a(()=>[l(e(le),null,{default:a(()=>b[2]||(b[2]=[f("账户名称设置")])),_:1})]),_:1}),l(e(ae),{class:"grid gap-4 p-6 text-sm"},{default:a(()=>[$("div",ml,[l(e(We),{schema:e(d),form:e(c),onSubmit:m,class:"space-y-6","field-config":{username:{hideLabel:!0,inputProps:{placeholder:e(ie)().username}}}},{username:a(v=>[$("div",_l,[$("div",vl,[l(e(ue),L(D(v)),null,16)]),$("div",null,[l(e(Ve),{open:s.value,"onUpdate:open":b[1]||(b[1]=k=>{k||(s.value=k)})},{default:a(()=>[l(e(Ne),{"as-child":""},{default:a(()=>[l(e(R),{type:"submit"},{default:a(()=>b[3]||(b[3]=[f("更新")])),_:1})]),_:1}),l(e(Se),null,{default:a(()=>[l(e(Ae),null,{default:a(()=>[l(e(qe),null,{default:a(()=>b[4]||(b[4]=[f("确定要更新用户名吗？")])),_:1}),l(e(Pe),null,{default:a(()=>[b[5]||(b[5]=$("p",null,"注意此操作不可逆，请谨慎操作！",-1)),n.value.length>0?(i(),N("div",gl,_(n.value),1)):A("",!0)]),_:1})]),_:1}),l(e(Ze),null,{default:a(()=>[l(e(Le),{disabled:u.value},{default:a(()=>b[6]||(b[6]=[f("取消")])),_:1},8,["disabled"]),l(e(R),{type:"primary",onClick:b[0]||(b[0]=k=>t()),disabled:u.value},{default:a(()=>[u.value?(i(),p(e(De),{key:0,class:"w-4 h-4 mr-2 animate-spin"})):A("",!0),b[7]||(b[7]=f(" 确认 "))]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])])])]),_:1},8,["schema","form","field-config"])])]),_:1})]),_:1}))}}),yl={class:"grid gap-3 lg:grid-cols-2 xl:grid-cols-2 3xl:grid-cols-3 xxl:grid-cols-4"},jl=w({__name:"IndexPage",setup(r){const s=P(!1);return(u,n)=>(i(),N("div",yl,[l(e(Na),{"onUpdate:isBindDiscourse":n[0]||(n[0]=o=>s.value=o)}),l(e(bl)),l(wa,{class:"lg:col-span-2 xl:col-span-1"}),l(e(pl),{class:"lg:col-span-2 xl:col-span-1"}),s.value?(i(),p(e(Aa),{key:0,class:"col-span-1 lg:col-span-2 xl:col-span-2 3xl:col-span-3 xxl:col-span-4"})):A("",!0)]))}});export{jl as default};
