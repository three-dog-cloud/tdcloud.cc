import{aX as u,g as b,a4 as s,a5 as h,a6 as d,ab as m,a7 as o,l as x,ac as w,ad as P,ae as p,r as F,Z as V,ag as i,aa as _,H as $,ah as z,ar as g}from"./assets/index-BE9XhI5F.js";import{a as O,b as S,c as C,_ as N}from"./CEBeazy6.js";import{g as B}from"./hbcvasLE.js";import{a as H,_ as j}from"./CRlC_2N-.js";function K(t){return/^(ftp|http|https):\/\/[^ "]+$/.test(t)}var v;(t=>{function l(e){return u({url:"/order",method:"get",params:e})}t.getOrders=l;function a(e){return u({url:`/order/${e}`,method:"get"})}t.getOrder=a;function c(e){return u({url:"/order",method:"post",data:e})}t.createOrder=c;function f(e){return u({url:`/order/${e}/status`,method:"get"})}t.getOrderStatus=f;function y(e){return u({url:`/order/${e}/pay/status`,method:"get"})}t.getOrderPayStatus=y;function n(e){return u({url:`/order/${e}/cancel`,method:"put"})}t.cancelOrder=n;function r(e){return u({url:`/order/${e}`,method:"post"})}t.continueProcessOrder=r})(v||(v={}));var k;(t=>{function l(c,f){return u({url:`/pay/gateway/${c}/${f}`,method:"get"})}t.getPaymentHandlingFee=l;function a(){return u({url:"pay/order/payment",method:"get"})}t.getPayOrderPayment=a})(k||(k={}));const Q=b({name:"MoneyComponent",__name:"MoneyComponent",props:{money:{type:Number,default:0}},setup(t){return(l,a)=>(s(),h(o(N),null,{default:d(()=>[m(o(O),null,{default:d(()=>[m(o(S),null,{default:d(()=>[x(l.$slots,"trigger",{},()=>[(s(),h(w(o(B)(t.money))))])]),_:3}),m(o(C),{class:"text-lg z-99999999"},{default:d(()=>[x(l.$slots,"content",{},()=>[P(p(t.money.toLocaleString()+l.$t("console.wallet_card.unit")),1)])]),_:3})]),_:3})]),_:3}))}}),A={class:"sm:gap-2 sm:items-center sm:flex sm:flex-wrap"},D={class:"flex items-center justify-between w-full mt-4"},E={class:"text-sm font-medium text-indigo-600 hover:text-indigo-500 text-size-xs"},L=["src","alt"],M={key:0,class:"flex items-center"},T={key:1},U={key:2,class:"flex items-center"},q={key:0},I={key:3},X={key:1},R=b({__name:"PayPayment",props:{price:{default:0},oldPayment:{default:""},payments:{},loading:{type:Boolean,default:!1},payment:{default:""},isShowPrice:{type:Boolean}},emits:["update:payment","update:price"],setup(t,{emit:l}){const a=t,c=l,f=n=>{if(n===void 0){c("update:payment","");return}Array.isArray(n)?c("update:payment",n[0]):c("update:payment",n)},y=F(a.price);return a.oldPayment!=""&&f(a.oldPayment),V(()=>{if(a.payment){const n=a.payments.find(r=>r.uuid===a.payment);if(n){let r=a.price/100;if(n.handling_fee_fixed>0&&(r+=n.handling_fee_fixed),n.handling_fee_percent>0){let e=parseFloat((r*(n.handling_fee_percent/100)).toFixed(2));e>n.handling_fee_percent_max&&(e=n.handling_fee_percent_max),r+=e}y.value=r,c("update:price",r)}}}),(n,r)=>(s(),i("div",A,[_("div",D,[r[1]||(r[1]=_("div",{class:"text-sm font-medium text-gray-900 dark:text-gray-100"},"支付方式",-1)),_("div",E,[x(n.$slots,"default",{},()=>[r[0]||(r[0]=P(" 默认创建支付渠道，可选其他，注意手续费，悬浮查看手续费详情 "))])])]),m(o(j),{variant:"outline",type:"single",class:"mt-2 grid grid-cols-4 md:grid-cols-5 gap-5 md:gap-6","model-value":n.payment,"onUpdate:modelValue":f},{default:d(()=>[(s(!0),i($,null,z(a.payments,e=>(s(),h(o(H),{key:e.uuid,value:e.uuid,class:"px-1! py-2!","aria-label":e.name,variant:"outline",disabled:a.loading},{default:d(()=>[m(o(N),null,{default:d(()=>[m(o(O),null,{default:d(()=>[m(o(S),{"as-child":""},{default:d(()=>[_("img",{src:e.icon,alt:e.name,class:"rounded-md object-cover size-6 md:size-8 object-scale-down pa-1"},null,8,L)]),_:2},1024),m(o(C),{class:"text-sm text-gray-900"},{default:d(()=>[_("p",null,p(e.name),1),a.oldPayment!==e.uuid?(s(),i($,{key:0},[e.handling_fee_fixed>0?(s(),i("p",M,"固定手续费：￥"+p(e.handling_fee_fixed),1)):g("",!0),e.handling_fee_percent>0?(s(),i("p",T,"手续费："+p(e.handling_fee_percent)+"%",1)):g("",!0),e.handling_fee_percent_max>0?(s(),i("p",U,[r[2]||(r[2]=P(" 手续费比例最高扣除：")),a.isShowPrice?(s(),h(w(o(B)(e.handling_fee_percent_max)),{key:1})):(s(),i("span",q,p("￥"+e.handling_fee_percent_max),1))])):g("",!0),a.isShowPrice?g("",!0):(s(),i("p",I," 实际支付: "+p(new Intl.NumberFormat("zh-CN",{style:"currency",currency:"CNY"}).format(Number(y.value))),1))],64)):(s(),i("p",X,"选我就是继续支付"))]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["value","aria-label","disabled"]))),128))]),_:1},8,["model-value"])]))}});export{v as O,k as P,R as _,Q as a,K as i};
